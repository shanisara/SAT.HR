
<div>
    <div class="row">
        <label class="col-sm-3 col-form-label">ชื่อพนักงาน</label>
        <div class="col-sm-8">
            @Html.DropDownList("UserID", new SelectList((IEnumerable<SelectListItem>)ViewBag.Employee, "Value", "Text"), "-- กรุณาเลือก --",
            new { @class = "selectpicker", data_style = "select-with-transition", data_show_subtext = "true", data_live_search = "true", required = "true" })
        </div>
    </div>
    <div class="row m-t-5">
        @Html.Label("ฝ่าย/กอง/งาน: ", null, new { @class = "col-sm-3 col-form-label" })
        <div class="col-sm-8">
            @Html.Hidden("CurMpID")
            <span class="label-text user-po"></span>
        </div>
    </div>
    <div class="row m-t-55">
        @Html.Label("ตำแหน่งปัจจุบัน: ", null, new { @class = "col-sm-3 col-form-label" })
        <div class="col-sm-8">
            <span class="label-text user-department"></span>
        </div>
    </div>
</div>

<script>
    $('.selectpicker').selectpicker();

    $("#UserID").change(function () {
        var userid = $('#UserID').val();
        $.ajax({
            type: 'POST',
            url: '@Url.Action("GetDetailByUser", "Master")',
            data: { userid: userid },
            dataType: 'json',
            success: function (res) {
                var department = res.FullDepartment;
                var poname = res.Position;
                var level = res.Level;
                var curmpid = res.MpID;
                $('#CurMpID').val(curmpid);
                $('.user-department').text(department);
                $('.user-po').text(poname);
                $('.user-level').text(level);
            }
        });
    });
</script>
