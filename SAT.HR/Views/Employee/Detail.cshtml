@model SAT.HR.Models.EmployeeViewModel
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .m-b-20 {
        margin-bottom: 20px;
    }

    .fileinput .thumbnail {
        max-width: 250px;
        max-height: 250px;
    }

    .card-contact {
        border: 0;
        margin-bottom: 30px;
        margin-top: 0px;
        border-radius: 6px;
        color: #333;
        background: #fff;
        width: 100%;
    }

    .nav-pills .nav-item .nav-link {
        font-size: 14px;
        padding: 10px 6px;
    }
        .nav-pills .nav-item .nav-link.active {
            font-size: 14px;
        }
    
</style>
<div class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header card-header-icon card-header-primary">
                    <div class="card-icon">
                        <i class="material-icons">perm_identity</i>
                    </div>
                    <h4 class="card-title">
                        <span>สวัสดิการพนักงาน: </span><span class="text-primary">@Model.FullName (1770500003531)</span>
                        <button type="submit" class="btn btn-round pull-right">ย้อนกลับ</button>
                    </h4>
                </div>
                <div class="card-body" id="tabs">
                    <ul class="nav nav-pills nav-pills-warning" role="tablist">
                        <li class="nav-item" id="employee">
                            <a class="nav-link text-link active" data-toggle="tab" href="#tab-employee" role="tablist"> ประวัติส่วนตัว </a>
                        </li>
                        <li class="nav-item" id="family">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-family" role="tablist"> ครอบครัว </a>
                        </li>
                        <li class="nav-item" id="education">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-education" role="tablist"> การศึกษา </a>
                        </li>
                        <li class="nav-item" id="position">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-position" role="tablist"> การดำรงตำแหน่ง </a>
                        </li>
                        <li class="nav-item" id="trainning">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-trainning" role="tablist"> อบรม/ดูงาน </a>
                        </li>
                        <li class="nav-item" id="insignia">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-insignia" role="tablist"> เครื่องราชฯ/วิริยะ </a>
                        </li>
                        <li class="nav-item" id="excellent">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-excellent" role="tablist"> พนักงานดีเด่น </a>
                        </li>
                        <li class="nav-item" id="certificate">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-certificate" role="tablist"> ใบประกอบวิชาชีพ </a>
                        </li>
                        <li class="nav-item" id="history">
                            <a class="nav-link text-link" data-toggle="tab" href="#tab-history" role="tablist"> ประวัติแก้ไขชื่อ </a>
                        </li>
                    </ul>
                    <div class="tab-content tab-space">
                        <div class="tab-pane active" id="tab-employee">
                            <div id="div-employee">
                                @Html.Partial("_Employee", Model)
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-family">
                            <div id="div-family"></div>
                            @Html.Partial("_Family")
                        </div>
                        <div class="tab-pane" id="tab-education">
                            <div id="div-education"></div>
                            @Html.Partial("_Education")
                        </div>
                        <div class="tab-pane" id="tab-position">
                            <div id="div-position"></div>
                            @Html.Partial("_Position")
                        </div>
                        <div class="tab-pane" id="tab-trainning">
                            <div id="div-trainning"></div>
                            @Html.Partial("_Trainning")
                        </div>
                        <div class="tab-pane" id="tab-insignia">
                            <div id="div-insignia"></div>
                            @Html.Partial("_Insignia")
                        </div>
                        <div class="tab-pane" id="tab-ำxcellent">
                            <div id="div-excellent"></div>
                            @Html.Partial("_Excellent")
                        </div>
                        <div class="tab-pane" id="tab-certificate">
                            <div id="div-certificate"></div>
                            @Html.Partial("_Certificate")
                        </div>
                        <div class="tab-pane" id="tab-history">
                            <div id="div-history"></div>
                            @Html.Partial("_History")
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    $(document).ready(function () {

        $('.datepicker').datetimepicker({
            format: 'DD/MM/YYYY',
            icons: {
                time: "fa fa-clock-o",
                date: "fa fa-calendar",
                up: "fa fa-chevron-up",
                down: "fa fa-chevron-down",
                previous: 'fa fa-chevron-left',
                next: 'fa fa-chevron-right',
                today: 'fa fa-screenshot',
                clear: 'fa fa-trash',
                close: 'fa fa-remove'
            }
        });


        $("#tabs li").click(function () {
            var id = this.id;
            if (id == "employee") {

            }
            else if (id == "family") {

            }
            else if (id == "education") {

            }
            else if (id == "position") {

            }
            else if (id == "trainning") {

            }
            else if (id == "insignia") {

            }
            else if (id == "excellent") {

            }
            else if (id == "certificate") {

            }
            else if (id == "history") {

            }
        });

        var DropDownList = {
            getDepartment: function (el, divid) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("DepartmentByDiv", "Master")',
                    data: { divid: divid },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            },
            getSection: function (el, divid, depid) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("SectionByDep", "Master")',
                    data: { divid: divid, depid: depid },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            },
            getProvince: function (el, proid) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("Province", "Master")',
                    data: { defaultValue: proid },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            },
            getDistrict: function (el, disid, proid) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("DistrictByPro", "Master")',
                    data: { defaultValue: disid, proid: proid },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            },
            getSubDistrict: function (el, subid, proid, disid) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("SubDistrict", "Master")',
                    data: { defaultValue: subid, proid: proid, disid: disid },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            },
            getSalaryLevel: function (el, level) {
                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("SalaryStepBylevel", "Master")',
                    data: { level: level },
                    dataType: 'json',
                    success: function (res) {
                        el.empty().append('<option value=""> -- กรุณาเลือก -- </option>');
                        $.each(res, function (key, entry) {
                            el.append($('<option>', { value: entry.Value, text: entry.Text, selected: entry.Selected }));
                        })
                    }
                });
            }
        }

        $("#DivID").change(function () {
            DropDownList.getDepartment($("#DepID"), $('#DivID').val());
        });

        $("#DepID").change(function () {
            DropDownList.getSection($("#SecID"), $('#DivID').val(), $('#DepID').val());
        });

        $("#EmpowerDivID").change(function () {
            DropDownList.getDepartment($("#EmpowerDepID"), $('#EmpowerDivID').val());
        });

        $("#EmpowerDepID").change(function () {
            DropDownList.getSection($("#EmpowerSecID"), $('#EmpowerDivID').val(), $('#EmpowerDepID').val());
        });

        $("#AgentDivID").change(function () {
            DropDownList.getDepartment($("#AgentDepID"), $('#AgentDivID').val());
        });

        $("#AgentDepID").change(function () {
            DropDownList.getSection($("#AgentSecID"), $('#AgentDivID').val(), $('#AgentDepID').val());
        });

        $("#HomeProvinceID").change(function () {
            DropDownList.getDistrict($("#HomeDistrictID"), $('#HomeProvinceID').val());
        });

        $("#HomeDistrictID").change(function () {
            DropDownList.getSubDistrict($("#HomeSubDistrictID"), $('#HomeProvinceID').val(), $('#HomeDistrictID').val());
        });

        $("#CurrProvinceID").change(function () {
            DropDownList.getDepartment($("#CurrDistrictID"), $('#CurrProvinceID').val());
        });

        $("#CurrDistrictID").change(function () {
            DropDownList.getSubDistrict($("#CurrSubDistrictID"), $('#CurrProvinceID').val(), $('#CurrDistrictID').val());
        });

        $("#SalaryLevel").change(function () {
            DropDownList.getSalaryLevel($("#SalaryStep"), $('#SalaryLevel').val());
        });

        $("#SalaryStep").change(function () {
            $.ajax({
                type: 'POST',
                url: '@Url.Action("SalaryByStep", "Master")',
                data: { level: $("#SalaryLevel").val(), step: $("#SalaryStep").val() },
                dataType: 'json',
                success: function (res) {
                    $("#Salary").val(res.Salary);
                }
            });
        });

        $("#CopyAddress").click(function () {
            if ($(this).is(':checked')) {
                $("#CurrAddr").val($("#HomeAddr").val());
                $("#CurrZipCode").val($("#HomeZipCode").val());

                var homeProvinceID = $("#HomeProvinceID").val();
                var homeDistrictID = $("#HomeDistrictID").val();
                var homeSubDistrictID = $("#HomeSubDistrictID").val();

                if (homeProvinceID != '') 
                    DropDownList.getProvince($("#CurrProvinceID"), homeProvinceID);

                if (homeDistrictID != '') 
                    DropDownList.getDistrict($("#CurrDistrictID"), homeDistrictID, homeProvinceID);

                if (homeSubDistrictID != '') 
                    DropDownList.getSubDistrict($("#CurrSubDistrictID"), homeSubDistrictID, homeProvinceID, homeDistrictID);
            }
        });


    });
</script>
<script>
    

 </script>
}